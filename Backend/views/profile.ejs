<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Profile</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .profile-photo-container {
            position: relative;
            display: inline-block;
        }
        .edit-icon {
            position: absolute;
            bottom: 0;
            right: 0;
            background: #f97316;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }
        .edit-icon:hover {
            background: #ea580c;
            transform: scale(1.1);
        }
        .tab-btn.active {
            border-bottom: 2px solid #f97316;
            color: #f97316;
        }
        .gradient-bg {
            background: linear-gradient(135deg, #f97316 0%, #fb923c 100%);
        }
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body class="bg-gray-100">
    <!-- Header -->
    <header class="gradient-bg text-white py-6 px-6 shadow-lg">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div class="flex items-center space-x-3">
                <i class="fas fa-user-circle text-3xl"></i>
                <h1 class="text-3xl font-bold">My Profile</h1>
            </div>
            <form action="/logout" method="POST" class="inline">
                <button type="submit" class="bg-red-500 px-6 py-2 rounded-lg hover:bg-red-600 transition duration-300 flex items-center space-x-2">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Logout</span>
                </button>
            </form>
        </div>
    </header>

    <div class="max-w-7xl mx-auto p-6">
        <!-- Profile Info Section -->
        <div class="bg-white rounded-xl shadow-lg p-8 mb-8 card-hover">
            <div class="flex flex-col md:flex-row gap-8">
                <!-- Profile Photo -->
                <div class="flex flex-col items-center">
                    <div class="profile-photo-container">
                        <% if (user.profilePhoto && user.profilePhoto !== '/images/default-avatar.png') { %>
                            <img src="<%= user.profilePhoto %>" alt="Profile" class="w-36 h-36 rounded-full object-cover border-4 border-orange-200">
                        <% } else { %>
                            <div class="w-36 h-36 rounded-full bg-gradient-to-br from-orange-400 to-orange-600 flex items-center justify-center border-4 border-orange-200">
                                <i class="fas fa-user text-white text-5xl"></i>
                            </div>
                        <% } %>
                        <div class="edit-icon" onclick="togglePhotoMenu()">
                            <i class="fas fa-pen text-white text-sm"></i>
                        </div>
                    </div>
                    
                    <!-- Photo Menu -->
                    <div id="photoMenu" class="hidden absolute bg-white rounded-lg shadow-lg border mt-2 z-10">
                        <button onclick="document.getElementById('photoInput').click()" class="flex items-center space-x-2 px-4 py-2 hover:bg-gray-100 w-full text-left">
                            <i class="fas fa-upload text-orange-500"></i>
                            <span>Upload Photo</span>
                        </button>
                        <% if (user.profilePhoto && user.profilePhoto !== '/images/default-avatar.png') { %>
                            <form action="/profile/remove-photo" method="POST" class="inline">
                                <button type="submit" class="flex items-center space-x-2 px-4 py-2 hover:bg-gray-100 w-full text-left text-red-600">
                                    <i class="fas fa-trash"></i>
                                    <span>Remove Photo</span>
                                </button>
                            </form>
                        <% } %>
                    </div>
                    
                    <form id="photoForm" action="/profile/update" method="POST" enctype="multipart/form-data" class="hidden">
                        <input type="file" id="photoInput" name="profilePhoto" accept="image/*" onchange="document.getElementById('photoForm').submit()">
                    </form>
                </div>
                
                <!-- User Info -->
                <div class="flex-1">
                    <div class="mb-6">
                        <h2 class="text-3xl font-bold text-gray-800 mb-2"><%= user.firstName %> <%= user.lastName %></h2>
                        <div class="flex items-center text-gray-600 mb-2">
                            <i class="fas fa-envelope mr-2 text-orange-500"></i>
                            <span><%= user.email %></span>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                            <div class="flex items-center text-gray-600">
                                <i class="fas fa-birthday-cake mr-2 text-orange-500"></i>
                                <span>Age: <%= user.age || 'Not specified' %></span>
                            </div>
                            <div class="flex items-center text-gray-600">
                                <i class="fas fa-briefcase mr-2 text-orange-500"></i>
                                <span>Profession: <%= user.profession || 'Not specified' %></span>
                            </div>
                            <div class="flex items-center text-gray-600">
                                <i class="fas fa-calendar-alt mr-2 text-orange-500"></i>
                                <span>Member since: <%= new Date(user.createdAt).toLocaleDateString() %></span>
                            </div>
                            <div class="flex items-center text-gray-600">
                                <i class="fas fa-crown mr-2 text-orange-500"></i>
                                <span>Membership: <%= user.membershipType %></span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Bio -->
                    <div class="mb-6">
                        <h3 class="font-semibold text-lg mb-3 flex items-center">
                            <i class="fas fa-quote-left mr-2 text-orange-500"></i>
                            Bio
                        </h3>
                        <p class="text-gray-700 bg-gray-50 p-4 rounded-lg italic"><%= user.bio || 'No bio added yet. Tell us about yourself!' %></p>
                    </div>
                    
                    <!-- Edit Profile Button -->
                    <button onclick="toggleEditForm()" class="bg-gradient-to-r from-blue-500 to-blue-600 text-white px-6 py-3 rounded-lg hover:from-blue-600 hover:to-blue-700 transition duration-300 flex items-center space-x-2">
                        <i class="fas fa-edit"></i>
                        <span>Edit Profile</span>
                    </button>
                </div>
            </div>
            
            <!-- Edit Form (Hidden by default) -->
            <div id="editForm" class="hidden mt-8 border-t pt-8">
                <h3 class="text-xl font-semibold mb-4 flex items-center">
                    <i class="fas fa-user-edit mr-2 text-orange-500"></i>
                    Edit Profile Information
                </h3>
                <form action="/profile/update" method="POST" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">First Name</label>
                        <input type="text" name="firstName" value="<%= user.firstName %>" class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Last Name</label>
                        <input type="text" name="lastName" value="<%= user.lastName %>" class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Age</label>
                        <input type="number" name="age" value="<%= user.age || '' %>" class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Profession</label>
                        <input type="text" name="profession" value="<%= user.profession || '' %>" class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                    </div>
                    <div class="md:col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Bio</label>
                        <textarea name="bio" class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-orange-500 focus:border-transparent" rows="4" placeholder="Tell us about yourself..."><%= user.bio || '' %></textarea>
                    </div>
                    <div class="md:col-span-2 flex space-x-4">
                        <button type="submit" class="bg-gradient-to-r from-green-500 to-green-600 text-white px-6 py-3 rounded-lg hover:from-green-600 hover:to-green-700 transition duration-300 flex items-center space-x-2">
                            <i class="fas fa-save"></i>
                            <span>Save Changes</span>
                        </button>
                        <button type="button" onclick="toggleEditForm()" class="bg-gradient-to-r from-gray-500 to-gray-600 text-white px-6 py-3 rounded-lg hover:from-gray-600 hover:to-gray-700 transition duration-300 flex items-center space-x-2">
                            <i class="fas fa-times"></i>
                            <span>Cancel</span>
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Tabs -->
        <div class="bg-white rounded-xl shadow-lg card-hover">
            <div class="border-b border-gray-200">
                <nav class="flex space-x-8 px-8">
                    <button onclick="showTab('batches')" class="tab-btn active py-4 font-medium transition duration-300 flex items-center space-x-2">
                        <i class="fas fa-graduation-cap"></i>
                        <span>My Batches</span>
                    </button>
                    <button onclick="showTab('blogs')" class="tab-btn py-4 text-gray-500 hover:text-orange-500 font-medium transition duration-300 flex items-center space-x-2">
                        <i class="fas fa-blog"></i>
                        <span>My Blogs</span>
                    </button>
                    <button onclick="showTab('bookmarks')" class="tab-btn py-4 text-gray-500 hover:text-orange-500 font-medium transition duration-300 flex items-center space-x-2">
                        <i class="fas fa-book"></i>
                        <span>Library</span>
                    </button>
                </nav>
            </div>

            <!-- Tab Content -->
            <div class="p-8">
                <!-- Batches Tab -->
                <div id="batches" class="tab-content">
                    <h3 class="text-2xl font-semibold mb-6 flex items-center">
                        <i class="fas fa-graduation-cap mr-3 text-orange-500"></i>
                        Purchased Batches
                    </h3>
                    <% if (purchases && purchases.length > 0) { %>
                        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                            <% purchases.forEach(purchase => { %>
                                <div class="border border-gray-200 rounded-xl p-6 card-hover bg-gradient-to-br from-white to-gray-50">
                                    <div class="flex items-center mb-4">
                                        <div class="w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center mr-4">
                                            <i class="fas fa-dumbbell text-orange-500"></i>
                                        </div>
                                        <h4 class="font-semibold text-lg"><%= purchase.batchId.name %></h4>
                                    </div>
                                    <p class="text-gray-600 text-sm mb-4"><%= purchase.batchId.description %></p>
                                    <div class="mb-2">
                                        <div class="flex justify-between items-center mb-1">
                                            <span class="text-sm font-medium text-gray-700">Progress</span>
                                            <span class="text-sm font-semibold text-orange-600"><%= purchase.progress %>%</span>
                                        </div>
                                        <div class="w-full bg-gray-200 rounded-full h-3">
                                            <div class="bg-gradient-to-r from-orange-400 to-orange-600 h-3 rounded-full transition-all duration-300" style="width: <%= purchase.progress %>%"></div>
                                        </div>
                                    </div>
                                </div>
                            <% }) %>
                        </div>
                    <% } else { %>
                        <div class="text-center py-12">
                            <i class="fas fa-graduation-cap text-6xl text-gray-300 mb-4"></i>
                            <p class="text-gray-500 text-lg">No batches purchased yet.</p>
                            <p class="text-gray-400">Start your yoga journey today!</p>
                        </div>
                    <% } %>
                </div>

                <!-- Blogs Tab -->
                <div id="blogs" class="tab-content hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-2xl font-semibold flex items-center">
                            <i class="fas fa-blog mr-3 text-orange-500"></i>
                            My Blog Posts
                        </h3>
                        <button onclick="toggleBlogForm()" class="bg-gradient-to-r from-orange-500 to-orange-600 text-white px-4 py-2 rounded-lg hover:from-orange-600 hover:to-orange-700 transition duration-300 flex items-center space-x-2">
                            <i class="fas fa-plus"></i>
                            <span>New Blog</span>
                        </button>
                    </div>

                    <!-- Create Blog Form -->
                    <div id="blogForm" class="hidden bg-gray-50 rounded-lg p-6 mb-6">
                        <h4 class="text-lg font-semibold mb-4">Create New Blog Post</h4>
                        <form action="/blog/create" method="POST" enctype="multipart/form-data" class="space-y-4">
                            <input type="text" name="title" placeholder="Blog Title" required class="w-full border rounded-lg px-4 py-2 focus:ring-2 focus:ring-orange-500">
                            <textarea name="content" placeholder="Write your blog content..." required class="w-full border rounded-lg px-4 py-2 h-32 focus:ring-2 focus:ring-orange-500"></textarea>
                            <input type="text" name="category" placeholder="Category" class="w-full border rounded-lg px-4 py-2 focus:ring-2 focus:ring-orange-500">
                            <input type="text" name="tags" placeholder="Tags (comma separated)" class="w-full border rounded-lg px-4 py-2 focus:ring-2 focus:ring-orange-500">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium mb-2">Images</label>
                                    <input type="file" name="images" multiple accept="image/*" class="w-full border rounded-lg px-4 py-2">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-2">Videos</label>
                                    <input type="file" name="videos" multiple accept="video/*" class="w-full border rounded-lg px-4 py-2">
                                </div>
                            </div>
                            <div class="flex space-x-4">
                                <button type="submit" class="bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition duration-300">Publish</button>
                                <button type="button" onclick="toggleBlogForm()" class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition duration-300">Cancel</button>
                            </div>
                        </form>
                    </div>

                    <!-- Blog Posts -->
                    <% if (blogs && blogs.length > 0) { %>
                        <div class="space-y-6">
                            <% blogs.forEach(blog => { %>
                                <div class="border border-gray-200 rounded-xl p-6 card-hover bg-white">
                                    <div class="flex justify-between items-start mb-4">
                                        <div>
                                            <h4 class="text-xl font-semibold mb-2"><%= blog.title %></h4>
                                            <p class="text-gray-600 text-sm">Published: <%= new Date(blog.createdAt).toLocaleDateString() %></p>
                                        </div>
                                        <div class="flex space-x-2">
                                            <button onclick="editBlog('<%= blog._id %>')" class="text-blue-500 hover:text-blue-700">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <form action="/blog/delete/<%= blog._id %>" method="POST" class="inline" onsubmit="return confirm('Delete this blog?')">
                                                <button type="submit" class="text-red-500 hover:text-red-700">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </form>
                                        </div>
                                    </div>
                                    
                                    <p class="text-gray-700 mb-4"><%= blog.content %></p>
                                    
                                    <!-- Media -->
                                    <% if (blog.images && blog.images.length > 0) { %>
                                        <div class="grid grid-cols-2 md:grid-cols-3 gap-2 mb-4">
                                            <% blog.images.forEach(image => { %>
                                                <img src="<%= image %>" alt="Blog image" class="w-full h-32 object-cover rounded-lg">
                                            <% }) %>
                                        </div>
                                    <% } %>
                                    
                                    <% if (blog.videos && blog.videos.length > 0) { %>
                                        <div class="mb-4">
                                            <% blog.videos.forEach(video => { %>
                                                <video controls class="w-full max-w-md rounded-lg mb-2">
                                                    <source src="<%= video %>" type="video/mp4">
                                                </video>
                                            <% }) %>
                                        </div>
                                    <% } %>
                                    
                                    <!-- Interactions -->
                                    <div class="flex items-center justify-between border-t pt-4">
                                        <div class="flex items-center space-x-4">
                                            <button onclick="likeBlog('<%= blog._id %>')" class="flex items-center space-x-1 text-gray-600 hover:text-red-500">
                                                <i class="fas fa-heart"></i>
                                                <span id="likes-<%= blog._id %>"><%= blog.likes ? blog.likes.length : 0 %></span>
                                            </button>
                                            <button onclick="toggleComments('<%= blog._id %>')" class="flex items-center space-x-1 text-gray-600 hover:text-blue-500">
                                                <i class="fas fa-comment"></i>
                                                <span><%= blog.comments ? blog.comments.length : 0 %></span>
                                            </button>
                                            <button onclick="shareBlog('<%= blog._id %>')" class="flex items-center space-x-1 text-gray-600 hover:text-green-500">
                                                <i class="fas fa-share"></i>
                                                <span>Share</span>
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <!-- Comments Section -->
                                    <div id="comments-<%= blog._id %>" class="hidden mt-4 border-t pt-4">
                                        <% if (blog.comments && blog.comments.length > 0) { %>
                                            <div class="space-y-3 mb-4">
                                                <% blog.comments.forEach(comment => { %>
                                                    <div class="flex space-x-3">
                                                        <img src="<%= comment.author.profilePhoto || '/images/default-avatar.png' %>" alt="Avatar" class="w-8 h-8 rounded-full">
                                                        <div class="flex-1">
                                                            <p class="text-sm font-medium"><%= comment.author.firstName %> <%= comment.author.lastName %></p>
                                                            <p class="text-gray-700 text-sm"><%= comment.content %></p>
                                                            <p class="text-xs text-gray-500"><%= new Date(comment.createdAt).toLocaleDateString() %></p>
                                                        </div>
                                                    </div>
                                                <% }) %>
                                            </div>
                                        <% } %>
                                        
                                        <!-- Add Comment -->
                                        <form action="/blog/comment/<%= blog._id %>" method="POST" class="flex space-x-3">
                                            <img src="<%= user.profilePhoto || '/images/default-avatar.png' %>" alt="Your Avatar" class="w-8 h-8 rounded-full">
                                            <div class="flex-1">
                                                <textarea name="content" placeholder="Write a comment..." required class="w-full border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-orange-500" rows="2"></textarea>
                                                <button type="submit" class="mt-2 bg-orange-500 text-white px-4 py-1 rounded text-sm hover:bg-orange-600">Comment</button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            <% }) %>
                        </div>
                    <% } else { %>
                        <div class="text-center py-12">
                            <i class="fas fa-blog text-6xl text-gray-300 mb-4"></i>
                            <p class="text-gray-500 text-lg">No blog posts written yet.</p>
                            <p class="text-gray-400">Share your thoughts with the community!</p>
                        </div>
                    <% } %>
                </div>

                <!-- Library Tab -->
                <div id="bookmarks" class="tab-content hidden">
                    <h3 class="text-2xl font-semibold mb-6 flex items-center">
                        <i class="fas fa-book mr-3 text-orange-500"></i>
                        My Library Contributions
                    </h3>
                    
                    <!-- Suggested Books -->
                    <div class="mb-8">
                        <h4 class="text-lg font-semibold mb-4 flex items-center">
                            <i class="fas fa-book-medical mr-2 text-green-500"></i>
                            Books I Suggested
                        </h4>
                        <% if (suggestedBooks && suggestedBooks.length > 0) { %>
                            <div class="grid md:grid-cols-2 gap-4">
                                <% suggestedBooks.forEach(book => { %>
                                    <div class="border border-gray-200 rounded-xl p-4 card-hover bg-gradient-to-br from-white to-gray-50">
                                        <div class="flex items-start space-x-4">
                                            <div class="w-16 h-20 bg-orange-100 rounded-lg flex items-center justify-center flex-shrink-0">
                                                <% if (book.coverImage) { %>
                                                    <img src="<%= book.coverImage %>" alt="<%= book.title %>" class="w-full h-full object-cover rounded-lg">
                                                <% } else { %>
                                                    <i class="fas fa-book text-orange-400 text-2xl"></i>
                                                <% } %>
                                            </div>
                                            <div class="flex-1">
                                                <h5 class="font-semibold text-lg mb-1"><%= book.title %></h5>
                                                <% if (book.author) { %>
                                                    <p class="text-gray-600 text-sm mb-2">by <%= book.author %></p>
                                                <% } %>
                                                <% if (book.description) { %>
                                                    <p class="text-gray-700 text-sm mb-2"><%= book.description.substring(0, 80) %>...</p>
                                                <% } %>
                                                <div class="flex items-center justify-between">
                                                    <div class="flex items-center space-x-3 text-sm text-gray-500">
                                                        <span><i class="fas fa-heart text-red-400"></i> <%= book.likes ? book.likes.length : 0 %></span>
                                                        <span><i class="fas fa-calendar"></i> <%= new Date(book.createdAt).toLocaleDateString() %></span>
                                                    </div>
                                                    <% if (book.purchaseLink) { %>
                                                        <a href="<%= book.purchaseLink %>" target="_blank" class="text-orange-500 hover:text-orange-600 text-sm">
                                                            <i class="fas fa-external-link-alt"></i>
                                                        </a>
                                                    <% } %>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                <% }) %>
                            </div>
                        <% } else { %>
                            <div class="text-center py-8 bg-gray-50 rounded-lg">
                                <i class="fas fa-book-medical text-4xl text-gray-300 mb-3"></i>
                                <p class="text-gray-500">You haven't suggested any books yet.</p>
                                <a href="/library" class="text-orange-500 hover:text-orange-600 text-sm font-medium">Visit Library to suggest books</a>
                            </div>
                        <% } %>
                    </div>

                    <!-- Bookmarked Articles -->
                    <div>
                        <h4 class="text-lg font-semibold mb-4 flex items-center">
                            <i class="fas fa-bookmark mr-2 text-blue-500"></i>
                            Bookmarked Articles
                        </h4>
                        <% if (bookmarks && bookmarks.length > 0) { %>
                            <div class="space-y-4">
                                <% bookmarks.forEach(bookmark => { %>
                                    <div class="border border-gray-200 rounded-lg p-4 card-hover">
                                        <h5 class="font-semibold mb-2"><%= bookmark.blogId.title %></h5>
                                        <p class="text-gray-600 text-sm mb-2"><%= bookmark.blogId.content.substring(0, 150) %>...</p>
                                        <p class="text-xs text-gray-500">Bookmarked: <%= new Date(bookmark.bookmarkedAt).toLocaleDateString() %></p>
                                    </div>
                                <% }) %>
                            </div>
                        <% } else { %>
                            <div class="text-center py-8 bg-gray-50 rounded-lg">
                                <i class="fas fa-bookmark text-4xl text-gray-300 mb-3"></i>
                                <p class="text-gray-500">No bookmarks saved yet.</p>
                            </div>
                        <% } %>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function toggleEditForm() {
            const form = document.getElementById('editForm');
            form.classList.toggle('hidden');
        }

        function togglePhotoMenu() {
            const menu = document.getElementById('photoMenu');
            menu.classList.toggle('hidden');
        }

        function toggleBlogForm() {
            const form = document.getElementById('blogForm');
            form.classList.toggle('hidden');
        }

        function toggleComments(blogId) {
            const comments = document.getElementById('comments-' + blogId);
            comments.classList.toggle('hidden');
        }

        function likeBlog(blogId) {
            fetch('/blog/like/' + blogId, { method: 'POST' })
                .then(response => response.json())
                .then(data => {
                    document.getElementById('likes-' + blogId).textContent = data.likes;
                })
                .catch(error => console.error('Error:', error));
        }

        function shareBlog(blogId) {
            const url = window.location.origin + '/blog/' + blogId;
            navigator.clipboard.writeText(url).then(() => {
                alert('Blog link copied to clipboard!');
            });
        }

        function editBlog(blogId) {
            // Simple edit functionality - you can enhance this
            window.location.href = '/blog/edit/' + blogId;
        }

        // Close photo menu when clicking outside
        document.addEventListener('click', function(event) {
            const menu = document.getElementById('photoMenu');
            const editIcon = document.querySelector('.edit-icon');
            if (!menu.contains(event.target) && !editIcon.contains(event.target)) {
                menu.classList.add('hidden');
            }
        });

        function showTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.add('hidden');
            });
            
            // Remove active styles from all tab buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
                btn.classList.add('text-gray-500');
            });
            
            // Show selected tab
            document.getElementById(tabName).classList.remove('hidden');
            
            // Add active styles to clicked button
            event.target.classList.add('active');
            event.target.classList.remove('text-gray-500');
        }
    </script>
</body>
</html>